# PromptLab

AI prompt engineering platform for storing, organizing, and iterating on reusable prompt templates. The backend ships with a FastAPI service and an in-memory data store; frontend and CI pieces are scaffold targets for future work.

---

## Overview and Purpose
- Central workspace to manage prompt templates with metadata and collections.
- Simple REST API to create, read, update, search, and delete prompts.
- Foundation for adding versioning, tagging, persistence, and frontend UX.

---

## Features
- Prompt CRUD with full/partial updates and timestamps.
- Collections to group prompts; deletion automatically detaches prompts.
- Search and filter prompts by `collection_id` and text query.
- Health endpoint and autogenerated Swagger docs at `/docs`.
- CORS enabled for all origins to simplify local frontend integration.

---

## Prerequisites and Installation
- Python 3.10+
- pip
- Git
- (Future) Node.js 18+ for the React frontend

```bash
# Clone and enter the repo
git clone <your-repo-url> promptlab
cd promptlab/backend

# Create and activate a virtual environment (recommended)
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt
```

---

## Quick Start
```bash
cd backend
python main.py
```

- API base: `http://localhost:8000`
- Interactive docs: `http://localhost:8000/docs`

Run tests:
```bash
cd backend
pytest tests/ -v
```

---

## API Endpoint Summary

**Health**
- `GET /health` → `{ "status": "healthy", "version": "<semver>" }`

**Prompts**
- `GET /prompts?collection_id=<id>&search=<text>`  
  Lists prompts, supports optional collection filter and text search.
- `GET /prompts/{prompt_id}`  
  Retrieve a single prompt.
- `POST /prompts`  
  Create a prompt.
- `PUT /prompts/{prompt_id}`  
  Replace a prompt (all fields required).
- `PATCH /prompts/{prompt_id}`  
  Partial update (only provided fields are changed).
- `DELETE /prompts/{prompt_id}`  
  Delete a prompt.

Example create + fetch:
```bash
# Create
curl -X POST http://localhost:8000/prompts \
  -H "Content-Type: application/json" \
  -d '{"title":"Summarize","content":"Summarize: {{text}}","description":"Short summary"}'

# List (newest first)
curl "http://localhost:8000/prompts"
```

**Collections**
- `GET /collections` — list all collections.
- `GET /collections/{collection_id}` — fetch one.
- `POST /collections` — create.
- `DELETE /collections/{collection_id}` — delete; any prompts in the collection are retained but their `collection_id` is cleared.

Example create:
```bash
curl -X POST http://localhost:8000/collections \
  -H "Content-Type: application/json" \
  -d '{"name":"Productivity","description":"Work prompts"}'
```

---

## Development Setup
- Code lives in `backend/app` (FastAPI routes, models, in-memory storage, utilities).
- Entry point: `backend/main.py` (runs uvicorn with reload).
- Dependency pins: `backend/requirements.txt`.
- Current storage is in-memory; restart clears data. Swap `storage.py` for durable persistence when ready.
- Preferred workflow:
  1) Create/activate `.venv`
  2) `pip install -r requirements.txt`
  3) `python main.py`
  4) Develop against `http://localhost:8000/docs`
  5) `pytest tests/ -v` before commits

---

## Contributing Guidelines
- Work on feature branches (e.g., `cursor/docs-readme-refresh`).
- Keep scope focused; avoid drive-by refactors unrelated to the change.
- Add or update tests for behavioral changes.
- Run `pytest tests/ -v` before opening a PR.
- Document new endpoints or behaviors in this README or `docs/` as appropriate.

---

## Project Structure (high level)
```
backend/
  app/                # FastAPI app, models, storage, utils
  tests/              # pytest suite
  main.py             # dev server entrypoint
  requirements.txt
frontend/             # React/Vite (planned)
docs/, specs/         # Documentation and specs
PROJECT_BRIEF.md      # Assignment context
GRADING_RUBRIC.md     # Evaluation criteria
```
